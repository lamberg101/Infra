SLOW QUERY (couple minutes):
SELECT To_char(Row_number() over( PARTITION BY NULL ORDER BY txn_dt_time DESC)) AS "rowNo", trn_dt "trnDt", keterangan "description", drcr_ind "dbCr", Replace(Cast(jumlah AS DECIMAL(18, 2)), ',', '.') "amount" FROM (SELECT a.ac_no, a.trn_ref_no, a.instrument_code, To_char (a.trn_dt, 'DD-MM-YYYY') AS trn_dt, a.trn_dt trn_dtm, a.trn_code, a.event, ( (SELECT Trim (addl_text) FROM cstbs_addl_text WHERE reference_no = a.trn_ref_no AND evnt_seq_no = a.event_sr_no) || ' ' || (SELECT narrative FROM detb_rtl_teller WHERE trn_ref_no = a.trn_ref_no) || ' ' || (SELECT DISTINCT addl_text FROM detb_jrnl_txn_detail WHERE reference_no = a.trn_ref_no AND serial_no = a.curr_no) || ' ' || s.trn_desc || ' ' || ( CASE WHEN s.trn_desc LIKE 'SI %' THEN (SELECT internal_remarks FROM sitb_contract_master WHERE contract_ref_no = a.trn_ref_no AND version_no = (SELECT Max ( version_no) FROM sitb_contract_master WHERE contract_ref_no = a.trn_ref_no) ) ELSE Decode (a.related_account, '', '', ' For the Account No.' || a.related_account) || Decode (a.MODULE, 'CI', ' a.n ' || y.customer_name1, '') END ) || ' ' || (SELECT s.user_ref_no || ' ' || Decode (s.module_code, 'IB', 'Mtr_dt: ' || To_char (u.maturity_date, 'YYYY-MM-DD') || ' ' || u.ket2, 'Exp_dt: ' || To_char (t.expiry_date, 'YYYY-MM-DD') || ' ' || t.ket1) FROM cstb_contract s, (SELECT a.contract_ref_no, a.expiry_date, ( 'APP: ' || b.cust_name || ' & ' || 'BEN: ' || c.cust_name ) ket1 FROM lctbs_contract_master a, (SELECT contract_ref_no, event_seq_no, cust_name FROM lctb_parties WHERE party_type = 'APP') b, (SELECT contract_ref_no, event_seq_no, cust_name FROM lctb_parties WHERE party_type = 'BEN') c WHERE a.contract_ref_no = b.contract_ref_no AND a.contract_ref_no = c.contract_ref_no AND a.event_seq_no = b.event_seq_no AND a.event_seq_no = c.event_seq_no AND a.version_no = (SELECT Max (version_no) FROM lctbs_contract_master WHERE contract_ref_no = a.contract_ref_no)) t, (SELECT d.bcrefno, d.maturity_date, ( 'DRAWEE: ' || e.party_name || ' & ' || 'DRAWER: ' || f.party_name ) ket2 FROM bctb_contract_master d, (SELECT bcrefno, event_seq_no, party_name FROM bctb_contract_parties WHERE party_type = 'DRAWEE') e, (SELECT bcrefno, event_seq_no, party_name FROM bctb_contract_parties WHERE party_type = 'DRAWER') f WHERE d.bcrefno = e.bcrefno AND d.bcrefno = f.bcrefno AND d.event_seq_no = e.event_seq_no AND d.event_seq_no = f.event_seq_no AND d.version_no = (SELECT Max (version_no) FROM bctb_contract_master WHERE bcrefno = d.bcrefno)) u WHERE s.contract_ref_no = t.contract_ref_no(+) AND s.contract_ref_no = u.bcrefno(+) AND s.contract_ref_no = a.trn_ref_no GROUP BY s.user_ref_no, s.module_code, t.expiry_date, u.maturity_date, t.ket1, u.ket2) ) keterangan, a.drcr_ind, Decode (a.ac_ccy, 'IDR', a.lcy_amount, a.fcy_amount) AS jumlah, a.lcy_amount AS ekivalen, a.auth_stat, a.txn_dt_time, To_char (a.txn_dt_time, 'DD-MM-YY HH24:MI:SS') AS value_dt FROM acvw_all_ac_entries a, sttms_trn_code s, cltb_account_apps_master x, sttm_customer y WHERE a.ac_no = '3070039854' AND a.trn_dt >= Add_months(SYSDATE, -60) AND a.trn_code = s.trn_code AND a.related_account = x.account_number(+) AND a.ac_branch = x.branch_code(+) AND x.customer_id = y.customer_no(+) AND a.EVENT<>'REVL' AND Trunc(a.txn_dt_time) - trn_dt <= 5 UNION ALL SELECT a.ac_no, a.trn_ref_no, a.instrument_code, To_char (a.trn_dt, 'DD-MM-YYYY') AS trn_dt, a.trn_dt trn_dtm, a.trn_code, a.event, ( (SELECT Trim (addl_text) FROM cstbs_addl_text WHERE reference_no = a.trn_ref_no AND evnt_seq_no = a.event_sr_no) || ' ' || (SELECT narrative FROM detb_rtl_teller WHERE trn_ref_no = a.trn_ref_no) || ' ' || (SELECT DISTINCT addl_text FROM detb_jrnl_txn_detail WHERE reference_no = a.trn_ref_no AND serial_no = a.curr_no) || ' ' || s.trn_desc || ' ' || ( CASE WHEN s.trn_desc LIKE 'SI %' THEN (SELECT internal_remarks FROM sitb_contract_master WHERE contract_ref_no = a.trn_ref_no AND version_no = (SELECT Max ( version_no) FROM sitb_contract_master WHERE contract_ref_no = a.trn_ref_no) ) ELSE Decode (a.related_account, '', '', ' For the Account No.' || a.related_account) || Decode (a.MODULE, 'CI', ' a.n ' || y.customer_name1, '') END ) || ' ' || (SELECT s.user_ref_no || ' ' || Decode (s.module_code, 'IB', 'Mtr_dt: ' || To_char (u.maturity_date, 'YYYY-MM-DD') || ' ' || u.ket2, 'Exp_dt: ' || To_char (t.expiry_date, 'YYYY-MM-DD') || ' ' || t.ket1) FROM cstb_contract s, (SELECT a.contract_ref_no, a.expiry_date, ( 'APP: ' || b.cust_name || ' & ' || 'BEN: ' || c.cust_name ) ket1 FROM lctbs_contract_master a, (SELECT contract_ref_no, event_seq_no, cust_name FROM lctb_parties WHERE party_type = 'APP') b, (SELECT contract_ref_no, event_seq_no, cust_name FROM lctb_parties WHERE party_type = 'BEN') c WHERE a.contract_ref_no = b.contract_ref_no AND a.contract_ref_no = c.contract_ref_no AND a.event_seq_no = b.event_seq_no AND a.event_seq_no = c.event_seq_no AND a.version_no = (SELECT Max (version_no) FROM lctbs_contract_master WHERE contract_ref_no = a.contract_ref_no)) t, (SELECT d.bcrefno, d.maturity_date, ( 'DRAWEE: ' || e.party_name || ' & ' || 'DRAWER: ' || f.party_name ) ket2 FROM bctb_contract_master d, (SELECT bcrefno, event_seq_no, party_name FROM bctb_contract_parties WHERE party_type = 'DRAWEE') e, (SELECT bcrefno, event_seq_no, party_name FROM bctb_contract_parties WHERE party_type = 'DRAWER') f WHERE d.bcrefno = e.bcrefno AND d.bcrefno = f.bcrefno AND d.event_seq_no = e.event_seq_no AND d.event_seq_no = f.event_seq_no AND d.version_no = (SELECT Max (version_no) FROM bctb_contract_master WHERE bcrefno = d.bcrefno)) u WHERE s.contract_ref_no = t.contract_ref_no(+) AND s.contract_ref_no = u.bcrefno(+) AND s.contract_ref_no = a.trn_ref_no GROUP BY s.user_ref_no, s.module_code, t.expiry_date, u.maturity_date, t.ket1, u.ket2) ) keterangan, a.drcr_ind, Decode (a.ac_ccy, 'IDR', a.lcy_amount, a.fcy_amount) AS jumlah, a.lcy_amount AS ekivalen, a.auth_stat, a.txn_dt_time, To_char (a.txn_dt_time, 'DD-MM-YY HH24:MI:SS') AS value_dt FROM acvw_all_ac_entries a, sttms_trn_code s, cltb_account_apps_master x, sttm_customer y WHERE a.ac_no = '3070039854' AND a.trn_code = s.trn_code AND a.related_account = x.account_number(+) AND a.ac_branch = x.branch_code(+) AND x.customer_id = y.customer_no(+) AND a.trn_dt >= Add_months(SYSDATE, -60) AND a.EVENT<>'REVL' AND Trunc(txn_dt_time) - a.trn_dt > 5 ) WHERE (To_char (txn_dt_time, 'YYYY-MM-DD') >= '2022-06-29' AND To_char (txn_dt_time, 'YYYY-MM-DD') <= '2022-06-29')


==========================================================================================================================================

FAST QUERY (4 seconds):
SELECT To_char(Row_number() over( PARTITION BY NULL ORDER BY txn_dt_time DESC)) AS "rowNo", trn_dt "trnDt", keterangan "description", drcr_ind "dbCr", Replace(Cast(jumlah AS DECIMAL(18, 2)), ',', '.') "amount" FROM (SELECT a.ac_no, a.trn_ref_no, a.instrument_code, To_char (a.trn_dt, 'DD-MM-YYYY') AS trn_dt, a.trn_dt trn_dtm, a.trn_code, a.event, ( (SELECT Trim (addl_text) FROM cstbs_addl_text WHERE reference_no = a.trn_ref_no AND evnt_seq_no = a.event_sr_no) || ' ' || (SELECT narrative FROM detb_rtl_teller WHERE trn_ref_no = a.trn_ref_no) || ' ' || (SELECT DISTINCT addl_text FROM detb_jrnl_txn_detail WHERE reference_no = a.trn_ref_no AND serial_no = a.curr_no) || ' ' || s.trn_desc || ' ' || ( CASE WHEN s.trn_desc LIKE 'SI %' THEN (SELECT internal_remarks FROM sitb_contract_master WHERE contract_ref_no = a.trn_ref_no AND version_no = (SELECT Max ( version_no) FROM sitb_contract_master WHERE contract_ref_no = a.trn_ref_no) ) ELSE Decode (a.related_account, '', '', ' For the Account No.' || a.related_account) || Decode (a.MODULE, 'CI', ' a.n ' || y.customer_name1, '') END ) || ' ' || (SELECT s.user_ref_no || ' ' || Decode (s.module_code, 'IB', 'Mtr_dt: ' || To_char (u.maturity_date, 'YYYY-MM-DD') || ' ' || u.ket2, 'Exp_dt: ' || To_char (t.expiry_date, 'YYYY-MM-DD') || ' ' || t.ket1) FROM cstb_contract s, (SELECT a.contract_ref_no, a.expiry_date, ( 'APP: ' || b.cust_name || ' & ' || 'BEN: ' || c.cust_name ) ket1 FROM lctbs_contract_master a, (SELECT contract_ref_no, event_seq_no, cust_name FROM lctb_parties WHERE party_type = 'APP') b, (SELECT contract_ref_no, event_seq_no, cust_name FROM lctb_parties WHERE party_type = 'BEN') c WHERE a.contract_ref_no = b.contract_ref_no AND a.contract_ref_no = c.contract_ref_no AND a.event_seq_no = b.event_seq_no AND a.event_seq_no = c.event_seq_no AND a.version_no = (SELECT Max (version_no) FROM lctbs_contract_master WHERE contract_ref_no = a.contract_ref_no)) t, (SELECT d.bcrefno, d.maturity_date, ( 'DRAWEE: ' || e.party_name || ' & ' || 'DRAWER: ' || f.party_name ) ket2 FROM bctb_contract_master d, (SELECT bcrefno, event_seq_no, party_name FROM bctb_contract_parties WHERE party_type = 'DRAWEE') e, (SELECT bcrefno, event_seq_no, party_name FROM bctb_contract_parties WHERE party_type = 'DRAWER') f WHERE d.bcrefno = e.bcrefno AND d.bcrefno = f.bcrefno AND d.event_seq_no = e.event_seq_no AND d.event_seq_no = f.event_seq_no AND d.version_no = (SELECT Max (version_no) FROM bctb_contract_master WHERE bcrefno = d.bcrefno)) u WHERE s.contract_ref_no = t.contract_ref_no(+) AND s.contract_ref_no = u.bcrefno(+) AND s.contract_ref_no = a.trn_ref_no GROUP BY s.user_ref_no, s.module_code, t.expiry_date, u.maturity_date, t.ket1, u.ket2) ) keterangan, a.drcr_ind, Decode (a.ac_ccy, 'IDR', a.lcy_amount, a.fcy_amount) AS jumlah, a.lcy_amount AS ekivalen, a.auth_stat, a.txn_dt_time, To_char (a.txn_dt_time, 'DD-MM-YY HH24:MI:SS') AS value_dt FROM acvw_all_ac_entries a, sttms_trn_code s, cltb_account_apps_master x, sttm_customer y WHERE a.ac_no = '3070030364' AND a.trn_dt >= Add_months(SYSDATE, -60) AND a.trn_code = s.trn_code AND a.related_account = x.account_number(+) AND a.ac_branch = x.branch_code(+) AND x.customer_id = y.customer_no(+) AND a.EVENT<>'REVL' AND Trunc(a.txn_dt_time) - trn_dt <= 5 UNION ALL SELECT a.ac_no, a.trn_ref_no, a.instrument_code, To_char (a.trn_dt, 'DD-MM-YYYY') AS trn_dt, a.trn_dt trn_dtm, a.trn_code, a.event, ( (SELECT Trim (addl_text) FROM cstbs_addl_text WHERE reference_no = a.trn_ref_no AND evnt_seq_no = a.event_sr_no) || ' ' || (SELECT narrative FROM detb_rtl_teller WHERE trn_ref_no = a.trn_ref_no) || ' ' || (SELECT DISTINCT addl_text FROM detb_jrnl_txn_detail WHERE reference_no = a.trn_ref_no AND serial_no = a.curr_no) || ' ' || s.trn_desc || ' ' || ( CASE WHEN s.trn_desc LIKE 'SI %' THEN (SELECT internal_remarks FROM sitb_contract_master WHERE contract_ref_no = a.trn_ref_no AND version_no = (SELECT Max ( version_no) FROM sitb_contract_master WHERE contract_ref_no = a.trn_ref_no) ) ELSE Decode (a.related_account, '', '', ' For the Account No.' || a.related_account) || Decode (a.MODULE, 'CI', ' a.n ' || y.customer_name1, '') END ) || ' ' || (SELECT s.user_ref_no || ' ' || Decode (s.module_code, 'IB', 'Mtr_dt: ' || To_char (u.maturity_date, 'YYYY-MM-DD') || ' ' || u.ket2, 'Exp_dt: ' || To_char (t.expiry_date, 'YYYY-MM-DD') || ' ' || t.ket1) FROM cstb_contract s, (SELECT a.contract_ref_no, a.expiry_date, ( 'APP: ' || b.cust_name || ' & ' || 'BEN: ' || c.cust_name ) ket1 FROM lctbs_contract_master a, (SELECT contract_ref_no, event_seq_no, cust_name FROM lctb_parties WHERE party_type = 'APP') b, (SELECT contract_ref_no, event_seq_no, cust_name FROM lctb_parties WHERE party_type = 'BEN') c WHERE a.contract_ref_no = b.contract_ref_no AND a.contract_ref_no = c.contract_ref_no AND a.event_seq_no = b.event_seq_no AND a.event_seq_no = c.event_seq_no AND a.version_no = (SELECT Max (version_no) FROM lctbs_contract_master WHERE contract_ref_no = a.contract_ref_no)) t, (SELECT d.bcrefno, d.maturity_date, ( 'DRAWEE: ' || e.party_name || ' & ' || 'DRAWER: ' || f.party_name ) ket2 FROM bctb_contract_master d, (SELECT bcrefno, event_seq_no, party_name FROM bctb_contract_parties WHERE party_type = 'DRAWEE') e, (SELECT bcrefno, event_seq_no, party_name FROM bctb_contract_parties WHERE party_type = 'DRAWER') f WHERE d.bcrefno = e.bcrefno AND d.bcrefno = f.bcrefno AND d.event_seq_no = e.event_seq_no AND d.event_seq_no = f.event_seq_no AND d.version_no = (SELECT Max (version_no) FROM bctb_contract_master WHERE bcrefno = d.bcrefno)) u WHERE s.contract_ref_no = t.contract_ref_no(+) AND s.contract_ref_no = u.bcrefno(+) AND s.contract_ref_no = a.trn_ref_no GROUP BY s.user_ref_no, s.module_code, t.expiry_date, u.maturity_date, t.ket1, u.ket2) ) keterangan, a.drcr_ind, Decode (a.ac_ccy, 'IDR', a.lcy_amount, a.fcy_amount) AS jumlah, a.lcy_amount AS ekivalen, a.auth_stat, a.txn_dt_time, To_char (a.txn_dt_time, 'DD-MM-YY HH24:MI:SS') AS value_dt FROM acvw_all_ac_entries a, sttms_trn_code s, cltb_account_apps_master x, sttm_customer y WHERE a.ac_no = '3070030364' AND a.trn_code = s.trn_code AND a.related_account = x.account_number(+) AND a.ac_branch = x.branch_code(+) AND x.customer_id = y.customer_no(+) AND a.trn_dt >= Add_months(SYSDATE, -60) AND a.EVENT<>'REVL' AND Trunc(txn_dt_time) - a.trn_dt > 5 ) WHERE (To_char (txn_dt_time, 'YYYY-MM-DD') >= '2022-06-29' AND To_char (txn_dt_time, 'YYYY-MM-DD') <= '2022-06-29')